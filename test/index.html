<!DOCTYPE html>
<html>
<body onload="loadPage()">

<div id="start">
	<label for="easyModeSelect">Easy mode:</label> 
	<input type="checkbox" id="easyModeSelect">
    <input type="button" value="START" OnClick="startGame()"/>
</div>
<div id="showText">
    <input type="text" id="showTextLabel" value="NONE">
    <input type="text" id="showTimeLabel" value="000">
</div>
<div id="roundWon">
	ezz
    <input type="text" id="roundWonLabel" value="000">
</div>
<div id="enterText">
    <input type="text" id="answer" value="Podaj odpowiedÅº">
    <input type="button" value="submit" onClick="submitAnswer()"/>
</div>
<div id="score">
    looooser
    <input type="text" id="showResultLabel" value="000">
</div>


<script src="database.js" type="text/javascript"></script>
<script src="functions.js" type="text/javascript"></script>

<script>

var textRem;
var round = 0;
var words = [];

function startGame(){
	var mode = document.getElementById("easyModeSelect").checked;
	if(mode == true){
		words = [...wordsEasy];
    }else{
    	words = [...wordsNormal];
    }
    game();
}

function game(){
    round = round + 1;

    if (round > words.length) {
        changeVisibilityOfDisplay("start");
    } else {
        var actualText = [];
        var wordsInRound = [];

        for (let i = 0; i < round; i++) {
            var textToAdd;

            do {
                textToAdd = words[getRandomInt(words.length)].trim();
            } while (wordsInRound.includes(textToAdd));

            wordsInRound.push(textToAdd);
            actualText.push(textToAdd);
        }

        textRem = actualText.join(" ");

        changeVisibilityOfDisplay("showText");
        document.getElementById("showTextLabel").value = textRem;

        countingDown(1000, 5, "showTimeLabel");

        sleep(6000).then(() => {
            document.getElementById("showTimeLabel").value = "0";

            changeVisibilityOfDisplay("enterText");
        });
    }
}

function submitAnswer(){
    var x = document.getElementById("answer").value;
    if (x == textRem){
        changeVisibilityOfDisplay("roundWon");

        countingDown(1000, 2, "roundWonLabel");

        sleep(3000).then(() => {
            changeVisibilityOfDisplay("enterText");
            game();
        });

    }else{
        changeVisibilityOfDisplay("score");
        document.getElementById("showResultLabel").value = round - 1;
    }
}

</script>

</body>
</html>